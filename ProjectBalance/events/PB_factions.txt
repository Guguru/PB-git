###################################
#
# Faction events
#
###################################

#AI determines whether to join autonomy faction
character_event = {
	id = meneth.211
	is_triggered_only = yes
	
	desc = meneth.211.desc
	picture = GFX_evt_battle
	border = GFX_event_normal_frame_religion
	
	trigger = {
		NOT = { has_character_flag = desires_autonomy }
		ai = yes
		independent = no
		is_adult = yes
		is_landed = yes
		OR = {
			higher_tier_than = baron
			is_patrician = yes
		}
		liege = {
			is_feudal = yes
			OR = {
				current_heir = { NOT = { character = ROOT } }
				has_law = succ_feudal_elective
			}
			OR = {
				tier = king
				tier = emperor
			}
			OR = { #Ensures someone at least moderately strong creates the faction
				any_vassal = { leads_faction = faction_autonomy }
				ROOT = { tier = duke }
				ROOT = { tier = king }
				NOT = { any_vassal = { tier = duke } }
			}
		}
		#Character needs some reason to join
		OR = {
			trait = ambitious
			trait = envious
			trait = deceitful
			trait = greedy
			NOT = { opinion = { who = LIEGE value = 0 } }
			crownlaw_title = { has_law = king_peace_2 }
			crownlaw_title = { has_law = emperor_peace_2 }
			crownlaw_title = { has_law = revokation_2 }
			tier = king
		}
	}
	option = {
		name = OK
		set_variable = { which = "autonomy_desire" value = 0 }
		if = {
			limit = { tier = duke }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { tier = king }
			change_variable = { which = "autonomy_desire" value = 15 }
		}
		if = {
			limit = { liege = { dynasty = ROOT } }
			change_variable = { which = "autonomy_desire" value = -5 }
		}
		if = {
			limit = { liege = { is_close_relative = ROOT } }
			change_variable = { which = "autonomy_desire" value = -5 }
		}
		if = {
			limit = { NOT = { opinion = { who = LIEGE value = -10 } } }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { NOT = { opinion = { who = LIEGE value = -30 } } }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { NOT = { opinion = { who = LIEGE value = -50 } } }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { NOT = { opinion = { who = LIEGE value = -75 } } }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { opinion = { who = LIEGE value = 10 } }
			change_variable = { which = "autonomy_desire" value = -3 }
		}
		if = {
			limit = { opinion = { who = LIEGE value = 30 } }
			change_variable = { which = "autonomy_desire" value = -3 }
		}
		if = {
			limit = { opinion = { who = LIEGE value = 50 } }
			change_variable = { which = "autonomy_desire" value = -3 }
		}
		if = {
			limit = { opinion = { who = LIEGE value = 75 } }
			change_variable = { which = "autonomy_desire" value = -3 }
		}
		if = {
			limit = { 
				has_opinion_modifier = {
					who = LIEGE
					modifier = opinion_coerced_into_leaving_faction
				}
			}
			change_variable = { which = "autonomy_desire" value = -20 }
		}
		if = {
			limit = { crownlaw_title = { has_law = king_peace_1 } }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { crownlaw_title = { has_law = king_peace_2 } }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { crownlaw_title = { has_law = emperor_peace_1 } }
			change_variable = { which = "autonomy_desire" value = 8 }
		}
		if = {
			limit = { crownlaw_title = { has_law = emperor_peace_2 } }
			change_variable = { which = "autonomy_desire" value = 16 }
		}
		if = {
			limit = { crownlaw_title = { has_law = hre_law_0 } }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { crownlaw_title = { has_law = revokation_1 } }
			change_variable = { which = "autonomy_desire" value = 8 }
		}
		if = {
			limit = { crownlaw_title = { has_law = revokation_2 } }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { crownlaw_title = { has_law = crown_levies_1 } }
			change_variable = { which = "autonomy_desire" value = 2 }
		}
		if = {
			limit = { crownlaw_title = { has_law = crown_levies_2 } }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { crownlaw_title = { has_law = crown_levies_3 } }
			change_variable = { which = "autonomy_desire" value = 8 }
		}
		if = {
			limit = { crownlaw_title = { has_law = crown_levies_4 } }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { crownlaw_title = { has_law = inheritance_1 } }
			change_variable = { which = "autonomy_desire" value = 3 }
		}
		if = {
			limit = { trait = content }
			change_variable = { which = "autonomy_desire" value = -30 }
		}
		if = {
			limit = { trait = imbecile }
			change_variable = { which = "autonomy_desire" value = -25 }
		}
		if = {
			limit = { trait = inbred }
			change_variable = { which = "autonomy_desire" value = -25 }
		}
		if = {
			limit = { trait = craven }
			change_variable = { which = "autonomy_desire" value = -20 }
		}
		if = {
			limit = { trait = slow }
			change_variable = { which = "autonomy_desire" value = -15 }
		}
		if = {
			limit = { trait = kind }
			change_variable = { which = "autonomy_desire" value = -5 }
		}
		if = {
			limit = { trait = charitable }
			change_variable = { which = "autonomy_desire" value = -5 }
		}
		if = {
			limit = { trait = honest }
			change_variable = { which = "autonomy_desire" value = -5 }
		}
		if = {
			limit = { trait = humble }
			change_variable = { which = "autonomy_desire" value = -3 }
		}
		if = {
			limit = { trait = just }
			change_variable = { which = "autonomy_desire" value = -3 }
		}
		if = {
			limit = { trait = proud }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { trait = brave }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { trait = arbitrary }
			change_variable = { which = "autonomy_desire" value = 5 }
		}
		if = {
			limit = { trait = envious }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { trait = greedy }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { trait = impaler }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { trait = deceitful }
			change_variable = { which = "autonomy_desire" value = 10 }
		}
		if = {
			limit = { trait = ambitious }
			change_variable = { which = "autonomy_desire" value = 50 }
		}
		if = {
			limit = { check_variable = { which = autonomy_desire value = 0 } }
			set_character_flag = desires_autonomy
		}
		if = {
			limit = { NOT = { check_variable = { which = autonomy_desire value = -15 } } }
			clr_character_flag = desires_autonomy
		}
	}
}

#Faction meeting
character_event = {
	id = meneth.219
	is_triggered_only = yes
	
	desc = meneth.219.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	trigger = {
		leads_faction = faction_autonomy
	}
	option = {
		name = OK
		set_variable = { which = "autonomy_mood" value = 0 }
		any_faction_backer = {
			limit = { in_faction = faction_autonomy }
			character_event = { id = meneth.220 days = 1 }
		}
		character_event = { id = meneth.220 }
	}
}

#Faction meeting mood
character_event = {
	id = meneth.220
	is_triggered_only = yes
	
	desc = meneth.220.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	immediate = {
		if = {
			limit = { FROM = { character = ROOT } }
			character_event = { id = meneth.221 days = 3 }
		}
	}
	option = { #Happy
		name = OK
		FROM = { change_variable = { which = "autonomy_mood" value = 1 } }
		if = {
			limit = { FROM = { character = ROOT } }
			set_character_flag = faction_autonomy_happy
			change_variable = { which = "autonomy_mood" value = 1 }
		}
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "autonomy_mood" value = 1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "autonomy_mood" value = 2 } }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 10 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 30 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 75 }
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 4
				trait = imbecile
			}
			modifier = {
				factor = 4
				trait = inbred
			}
			modifier = {
				factor = 3
				trait = slow
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				liege = { dynasty = ROOT }
			}
			modifier = {
				factor = 2
				liege = { is_close_relative = ROOT }
			}
		}
	}
	option = { #Neutral
		name = OK
		if = {
			limit = { FROM = { character = ROOT } }
			set_character_flag = faction_autonomy_neutral
		}
		ai_will_do = {
			factor = 10
		}
	}
	option = { #Angry
		name = OK
		FROM = { change_variable = { which = "autonomy_mood" value = -1 } }
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "autonomy_mood" value = -1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "autonomy_mood" value = -2 } }
		}
		if = {
			limit = { FROM = { character = ROOT } }
			set_character_flag = faction_autonomy_angry
			change_variable = { which = "autonomy_mood" value = -1 }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -10 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -30 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -50 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -75 } }
			}
			modifier = {
				factor = 1.5
				crownlaw_title = { has_law = king_peace_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = king_peace_2 }
			}
			modifier = {
				factor = 1.6
				crownlaw_title = { has_law = emperor_peace_1 }
			}
			modifier = {
				factor = 2.5
				crownlaw_title = { has_law = emperor_peace_2 }
			}
			modifier = {
				factor = 1.75
				crownlaw_title = { has_law = revokation_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = revokation_2 }
			}
			modifier = {
				factor = 1.2
				crownlaw_title = { has_law = crown_levies_1 }
			}
			modifier = {
				factor = 1.4
				crownlaw_title = { has_law = crown_levies_2 }
			}
			modifier = {
				factor = 1.7
				crownlaw_title = { has_law = crown_levies_3 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = crown_levies_4 }
			}
			modifier = {
				factor = 1.3
				crownlaw_title = { has_law = inheritance_1 }
			}
			modifier = {
				factor = 0.75
				trait = kind
			}
			modifier = {
				factor = 0.75
				trait = charitable
			}
			modifier = {
				factor = 0.75
				trait = honest
			}
			modifier = {
				factor = 0.75
				trait = humble
			}
			modifier = {
				factor = 0.75
				trait = just
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = envious
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 5
				trait = ambitious
			}
		}
	}
}

#Mood gauged
character_event = {
	id = meneth.221
	is_triggered_only = yes
	
	desc = meneth.221.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	immediate = {
		set_variable = { which = "faction_vote" value = 0 }
	}
	option = { #Provide support against invasion
		name = meneth.221.a
		trigger = {
			check_variable = { which = "autonomy_mood" value = 0 }
			liege = {
				any_war = { defender = { character = PREVPREV } }
			}
		}
		set_character_flag = faction_autonomy_financial_support
		any_faction_backer = {
			limit = { in_faction = faction_autonomy }
			character_event = { id = meneth.222 days = 1 }
		}
		character_event = { id = meneth.222 }
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_character_flag = faction_autonomy_angry
			}
			modifier = {
				factor = 0
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = charitable
			}
		}
	}
	option = { #Status quo
		name = meneth.221.b
		trigger = {
			check_variable = { which = "autonomy_mood" value = -5 }
			NOT = { check_variable = { which = "autonomy_mood" value = 5 } }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1000
				has_character_flag = faction_autonomy_neutral
			}
			modifier = {
				factor = 0.01
				OR = {
					has_character_flag = faction_autonomy_happy
					has_character_flag = faction_autonomy_angry
				}
			}
		}
	}
	option = { #Demand lower obligations
		name = meneth.221.c
		trigger = {
			NOT = { check_variable = { which = "autonomy_mood" value = 0 } }
		}
		set_character_flag = faction_autonomy_lower_obligations
		any_faction_backer = {
			limit = { in_faction = faction_autonomy }
			character_event = { id = meneth.227 days = 1 }
		}
		character_event = { id = meneth.227 }
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_character_flag = faction_autonomy_happy
			}
			modifier = {
				factor = 5
				trait = greedy
			}
			modifier = {
				factor = 0
				trait = charitable
			}
			modifier = {
				factor = 0.1
				liege = {
					has_law = feudal_obligations_0
					has_law = crown_levies_0
				}
			}
			modifier = {
				factor = 0.1
				liege = {
					has_law = crown_levies_0
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_law = crown_levies_2
				}
			}
			modifier = {
				factor = 3
				liege = {
					has_law = crown_levies_3
				}
			}
			modifier = {
				factor = 4
				liege = {
					has_law = crown_levies_4
				}
			}
		}
	}
	option = { #Demand revocation removed
		name = meneth.221.d
		trigger = {
			NOT = { check_variable = { which = "autonomy_mood" value = 0 } }
			liege = {
				OR = {
					has_law = revokation_1
					has_law = revokation_2
				}
			}
		}
		set_character_flag = faction_autonomy_no_revocation
		any_faction_backer = {
			limit = { in_faction = faction_autonomy }
			character_event = { id = meneth.229 days = 1 }
		}
		character_event = { id = meneth.229 }
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0
				has_character_flag = faction_autonomy_happy
			}
			modifier = {
				factor = 1.5
				liege = { has_law = revokation_2 }
			}
			modifier = { #If the liege has a claim on one of their titles they might want to revoke it
				factor = 5
				liege = {
					any_claim = {
						holder_scope = { character = ROOT }
					}
				}
			}
			modifier = {
				factor = 5
				trait = ambitious
			}
		}
	}
	option = { #Demand internal peace removed
		name = meneth.221.e
		trigger = {
			NOT = { check_variable = { which = "autonomy_mood" value = 0 } }
			liege = {
				OR = {
					has_law = king_peace_1
					has_law = king_peace_2
					has_law = emperor_peace_1
					has_law = emperor_peace_2
				}
			}
		}
		set_character_flag = faction_autonomy_no_internal_peace
		any_faction_backer = {
			limit = { in_faction = faction_autonomy }
			character_event = { id = meneth.231 days = 1 }
		}
		character_event = { id = meneth.231 }
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0
				has_character_flag = faction_autonomy_happy
			}
			modifier = {
				factor = 2
				liege = { has_law = king_peace_2 }
			}
			modifier = {
				factor = 2
				liege = { has_law = emperor_peace_2 }
			}
			modifier = { #If faction leader has a claim inside the realm
				factor = 5
				any_claim = {
					holder_scope = {
						independent = yes
						same_realm = ROOT
					}
				}
			}
		}
	}
}

#Give financial support?
character_event = {
	id = meneth.222
	is_triggered_only = yes
	
	desc = meneth.222.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	immediate = {
		if = {
			limit = { FROM = { character = ROOT } }
			character_event = { id = meneth.223 days = 3 }
		}
	}
	option = { #Yes
		name = Yes
		FROM = { change_variable = { which = "faction_vote" value = 1 } }
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = 1 }
		}
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = 1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = 2 } }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 10 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 30 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 75 }
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 4
				trait = imbecile
			}
			modifier = {
				factor = 4
				trait = inbred
			}
			modifier = {
				factor = 3
				trait = slow
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 10
				trait = charitable
			}
			modifier = {
				factor = 2
				liege = { dynasty = ROOT }
			}
			modifier = {
				factor = 2
				liege = { is_close_relative = ROOT }
			}
		}
	}
	option = { #No
		name = No
		FROM = { change_variable = { which = "faction_vote" value = -1 } }
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = -1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = -2 } }
		}
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = -1 }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -10 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -30 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -50 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -75 } }
			}
			modifier = {
				factor = 1.5
				crownlaw_title = { has_law = king_peace_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = king_peace_2 }
			}
			modifier = {
				factor = 1.6
				crownlaw_title = { has_law = emperor_peace_1 }
			}
			modifier = {
				factor = 2.5
				crownlaw_title = { has_law = emperor_peace_2 }
			}
			modifier = {
				factor = 1.75
				crownlaw_title = { has_law = revokation_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = revokation_2 }
			}
			modifier = {
				factor = 1.2
				crownlaw_title = { has_law = crown_levies_1 }
			}
			modifier = {
				factor = 1.4
				crownlaw_title = { has_law = crown_levies_2 }
			}
			modifier = {
				factor = 1.7
				crownlaw_title = { has_law = crown_levies_3 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = crown_levies_4 }
			}
			modifier = {
				factor = 1.3
				crownlaw_title = { has_law = inheritance_1 }
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = envious
			}
			modifier = {
				factor = 10
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 5
				trait = ambitious
			}
		}
	}
}

#Vote outcome
character_event = {
	id = meneth.223
	is_triggered_only = yes
	
	desc = meneth.223.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	option = {
		name = meneth.223.a
		trigger = {
			check_variable = { which = "faction_vote" value = 0 }
		}
		hidden_tooltip = {
			any_faction_backer = {
				limit = {
					in_faction = faction_autonomy
					ai = no
				}
				character_event = { id = meneth.224 } #The vote succeeded
			}
		}
		liege = {
			if = {
				limit = { ROOT = { has_character_flag = faction_autonomy_financial_support } }
				character_event = { id = meneth.226 } #Gets financial support against the invaders
			}
			if = {
				limit = { ROOT = { has_character_flag = faction_autonomy_lower_obligations } }
				character_event = { id = meneth.228 } #Ultimatum to lower obligations
			}
			if = {
				limit = { ROOT = { has_character_flag = faction_autonomy_no_revocation } }
				character_event = { id = meneth.230 } #Ultimatum to remove revocation
			}
			if = {
				limit = { ROOT = { has_character_flag = faction_autonomy_no_internal_peace } }
				character_event = { id = meneth.232 } #Ultimatum to remove internal peace
			}
		}
		clr_character_flag = faction_autonomy_financial_support
		clr_character_flag = faction_autonomy_lower_obligations
		clr_character_flag = faction_autonomy_no_revocation
		clr_character_flag = faction_autonomy_no_internal_peace
	}
	option = {
		name = meneth.223.b
		trigger = {
			NOT = { check_variable = { which = "faction_vote" value = 0 } }
		}
		hidden_tooltip = {
			any_faction_backer = {
				limit = {
					in_faction = faction_autonomy
					ai = no
				}
				character_event = { id = meneth.225 } #The vote failed
			}
		}
	}
}

#Successful vote
character_event = {
	id = meneth.224
	is_triggered_only = yes
	
	desc = meneth.224.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	option = {
		name = OK
	}
}

#Failed vote
character_event = {
	id = meneth.225
	is_triggered_only = yes
	
	desc = meneth.225.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	option = {
		name = OK
	}
}

#Receives financial support
character_event = {
	id = meneth.226
	is_triggered_only = yes
	
	desc = meneth.226.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	option = {
		name = OK
		any_vassal = {
			limit = {
				OR = {
					in_faction = faction_autonomy
					leads_faction = faction_autonomy
				}
			}
			transfer_scaled_wealth = {
				to = ROOT
				value = 0.1
			}
			reverse_opinion = {
				who = ROOT
				modifier = opinion_grateful
				years = 10
			}
		}
	}
}

#Vote on demanding lower obligations
character_event = {
	id = meneth.227
	is_triggered_only = yes
	
	desc = meneth.227.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	immediate = {
		if = {
			limit = { FROM = { character = ROOT } }
			character_event = { id = meneth.223 days = 3 }
		}
	}
	option = { #Yes
		name = Yes
		FROM = { change_variable = { which = "faction_vote" value = 1 } }
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = 1 }
		}
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = 1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = 2 } }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -10 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -30 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -50 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -75 } }
			}
			modifier = {
				factor = 1.5
				crownlaw_title = { has_law = king_peace_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = king_peace_2 }
			}
			modifier = {
				factor = 1.6
				crownlaw_title = { has_law = emperor_peace_1 }
			}
			modifier = {
				factor = 2.5
				crownlaw_title = { has_law = emperor_peace_2 }
			}
			modifier = {
				factor = 1.75
				crownlaw_title = { has_law = revokation_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = revokation_2 }
			}
			modifier = {
				factor = 1.5
				crownlaw_title = { has_law = crown_levies_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = crown_levies_2 }
			}
			modifier = {
				factor = 3
				crownlaw_title = { has_law = crown_levies_3 }
			}
			modifier = {
				factor = 4
				crownlaw_title = { has_law = crown_levies_4 }
			}
			modifier = {
				factor = 1.3
				crownlaw_title = { has_law = inheritance_1 }
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = envious
			}
			modifier = {
				factor = 10
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 5
				trait = ambitious
			}
		}
	}
	option = { #No
		name = No
		FROM = { change_variable = { which = "faction_vote" value = -1 } }
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = -1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = -2 } }
		}
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = -1 }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 10 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 30 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 75 }
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 4
				trait = imbecile
			}
			modifier = {
				factor = 4
				trait = inbred
			}
			modifier = {
				factor = 3
				trait = slow
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 10
				trait = charitable
			}
			modifier = {
				factor = 2
				liege = { dynasty = ROOT }
			}
			modifier = {
				factor = 2
				liege = { is_close_relative = ROOT }
			}
		}
	}
}

#Ultimatum to reduce obligations
character_event = {
	id = meneth.228
	is_triggered_only = yes
	
	desc = meneth.228.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	option = {
		name = Yes
		trigger = {
			any_demesne_title = {
				OR = {
					has_law = crown_levies_1
					has_law = crown_levies_2
					has_law = crown_levies_3
					has_law = crown_levies_4
				}
			}
		}
		any_demesne_title = {
			limit = { has_law = crown_levies_1 }
			add_law = crown_levies_0
		}
		any_demesne_title = {
			limit = { has_law = crown_levies_2 }
			add_law = crown_levies_1
		}
		any_demesne_title = {
			limit = { has_law = crown_levies_3 }
			add_law = crown_levies_2
		}
		any_demesne_title = {
			limit = { has_law = crown_levies_4 }
			add_law = crown_levies_3
		}
		any_vassal = {
			limit = {
				OR = {
					in_faction = faction_autonomy
					leads_faction = faction_autonomy
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_grateful
				years = 10
			}
		}
	}
	option = {
		name = Yes
		trigger = {
			OR = {
				has_law = feudal_obligations_1
				has_law = feudal_obligations_2
				has_law = feudal_obligations_3
				has_law = feudal_obligations_4
			}
			NOT = {
				OR = {
					has_law = crown_levies_1
					has_law = crown_levies_2
					has_law = crown_levies_3
					has_law = crown_levies_4
				}
			}
		}
		if = {
			limit = { has_law = feudal_obligations_1 }
			add_law = feudal_obligations_0
		}
		if = {
			limit = { has_law = feudal_obligations_2 }
			add_law = feudal_obligations_1
		}
		if = {
			limit = { has_law = feudal_obligations_3 }
			add_law = feudal_obligations_2
		}
		if = {
			limit = { has_law = feudal_obligations_4 }
			add_law = feudal_obligations_3
		}
		any_vassal = {
			limit = {
				OR = {
					in_faction = faction_autonomy
					leads_faction = faction_autonomy
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_grateful
				years = 10
			}
		}
	}
	option = {
		name = Yes
		trigger = {
			NOT = {
				any_demesne_title = {
					OR = {
						has_law = crown_levies_1
						has_law = crown_levies_2
						has_law = crown_levies_3
						has_law = crown_levies_4
					}
				}
				has_law = feudal_obligations_1
				has_law = feudal_obligations_2
				has_law = feudal_obligations_3
				has_law = feudal_obligations_4
			}
		}
		add_character_modifier = {
			name = reduced_obligations
			duration = 3650
		}
		any_vassal = {
			limit = {
				OR = {
					in_faction = faction_autonomy
					leads_faction = faction_autonomy
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_grateful
				years = 10
			}
		}
	}
	option = {
		name = No
		any_vassal = {
			limit = {
				OR = {
					in_faction = faction_autonomy
					leads_faction = faction_autonomy
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_refused_ultimatum
				years = 20
			}
		}
	}
}

#Demand revocation removed?
character_event = {
	id = meneth.229
	is_triggered_only = yes
	
	desc = meneth.229.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	immediate = {
		if = {
			limit = { FROM = { character = ROOT } }
			character_event = { id = meneth.223 days = 3 }
		}
	}
	option = { #Yes
		name = Yes
		FROM = { change_variable = { which = "faction_vote" value = 1 } }
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = 1 }
		}
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = 1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = 2 } }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -10 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -30 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -50 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -75 } }
			}
			modifier = {
				factor = 1.5
				crownlaw_title = { has_law = king_peace_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = king_peace_2 }
			}
			modifier = {
				factor = 1.6
				crownlaw_title = { has_law = emperor_peace_1 }
			}
			modifier = {
				factor = 2.5
				crownlaw_title = { has_law = emperor_peace_2 }
			}
			modifier = {
				factor = 1.75
				crownlaw_title = { has_law = revokation_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = revokation_2 }
			}
			modifier = {
				factor = 1.2
				crownlaw_title = { has_law = crown_levies_1 }
			}
			modifier = {
				factor = 1.4
				crownlaw_title = { has_law = crown_levies_2 }
			}
			modifier = {
				factor = 1.7
				crownlaw_title = { has_law = crown_levies_3 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = crown_levies_4 }
			}
			modifier = {
				factor = 1.3
				crownlaw_title = { has_law = inheritance_1 }
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = envious
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 5
				trait = ambitious
			}
			modifier = { #If the liege has a claim on one of their titles they might want to revoke it
				factor = 5
				liege = {
					any_claim = {
						holder_scope = { character = ROOT }
					}
				}
			}
		}
	}
	option = { #No
		name = No
		FROM = { change_variable = { which = "faction_vote" value = -1 } }
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = -1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = -2 } }
		}
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = -1 }
		}
		
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 10 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 30 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 75 }
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 4
				trait = imbecile
			}
			modifier = {
				factor = 4
				trait = inbred
			}
			modifier = {
				factor = 3
				trait = slow
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				liege = { dynasty = ROOT }
			}
			modifier = {
				factor = 2
				liege = { is_close_relative = ROOT }
			}
		}
	}
}

#Ultimatum to remove revocation
character_event = {
	id = meneth.230
	is_triggered_only = yes
	
	desc = meneth.230.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	option = {
		name = Yes
		any_demesne_title = {
			limit = {
				OR = {
					tier = king
					tier = emperor
				}
			}
			add_law = revokation_0
		}
		any_vassal = {
			limit = {
				OR = {
					in_faction = faction_autonomy
					leads_faction = faction_autonomy
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_grateful
				years = 10
			}
		}
	}
	option = {
		name = No
		any_vassal = {
			limit = {
				OR = {
					in_faction = faction_autonomy
					leads_faction = faction_autonomy
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_refused_ultimatum
				years = 20
			}
		}
	}
}

#Demand internal peace removed?
character_event = {
	id = meneth.231
	is_triggered_only = yes
	
	desc = meneth.231.desc
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	immediate = {
		if = {
			limit = { FROM = { character = ROOT } }
			character_event = { id = meneth.223 days = 3 }
		}
	}
	option = { #Yes
		name = Yes
		FROM = { change_variable = { which = "faction_vote" value = 1 } }
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = 1 }
		}
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = 1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = 2 } }
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -10 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -30 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -50 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = LIEGE value = -75 } }
			}
			modifier = {
				factor = 1.5
				crownlaw_title = { has_law = king_peace_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = king_peace_2 }
			}
			modifier = {
				factor = 1.6
				crownlaw_title = { has_law = emperor_peace_1 }
			}
			modifier = {
				factor = 2.5
				crownlaw_title = { has_law = emperor_peace_2 }
			}
			modifier = {
				factor = 1.75
				crownlaw_title = { has_law = revokation_1 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = revokation_2 }
			}
			modifier = {
				factor = 1.2
				crownlaw_title = { has_law = crown_levies_1 }
			}
			modifier = {
				factor = 1.4
				crownlaw_title = { has_law = crown_levies_2 }
			}
			modifier = {
				factor = 1.7
				crownlaw_title = { has_law = crown_levies_3 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = crown_levies_4 }
			}
			modifier = {
				factor = 1.3
				crownlaw_title = { has_law = inheritance_1 }
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = envious
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 10
				trait = ambitious
			}
			modifier = { #If faction leader has a claim inside the realm
				factor = 5
				any_claim = {
					holder_scope = {
						independent = yes
						same_realm = ROOT
					}
				}
			}
		}
	}
	option = { #No
		name = No
		FROM = { change_variable = { which = "faction_vote" value = -1 } }
		if = {
			limit = { tier = duke }
			FROM = { change_variable = { which = "faction_vote" value = -1 } }
		}
		if = {
			limit = { tier = king }
			FROM = { change_variable = { which = "faction_vote" value = -2 } }
		}
		if = {
			limit = { FROM = { character = ROOT } }
			change_variable = { which = "faction_vote" value = -1 }
		}
		
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 10 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 30 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = LIEGE value = 75 }
			}
			modifier = {
				factor = 5
				trait = content
			}
			modifier = {
				factor = 4
				trait = imbecile
			}
			modifier = {
				factor = 4
				trait = inbred
			}
			modifier = {
				factor = 3
				trait = slow
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				liege = { dynasty = ROOT }
			}
			modifier = {
				factor = 2
				liege = { is_close_relative = ROOT }
			}
		}
	}
}